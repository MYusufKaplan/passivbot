# CMA-ME Optimizer Configuration

The CMA-ME (Covariance Matrix Adaptation MAP-Elites) optimizer combines quality-diversity optimization with evolutionary strategies to find diverse, high-performing trading bot configurations.

## Configuration Parameters

All CMA-ME parameters can be configured in `configs/optimize.json` under the `"optimize"` section:

### Archive Configuration

- **`archive_bins_per_dim`** (default: `10`)
  - Number of bins per dimension in the archive grid
  - Higher values create a finer-grained archive with more cells
  - Total archive cells = `archive_bins_per_dim ^ number_of_features`
  - Example: With 3 features and 10 bins per dimension, you get 10³ = 1000 cells
  - Recommended range: 5-20 (higher values require more memory and evaluations)

### Emitter Configuration

- **`num_emitters`** (default: `5`)
  - Number of parallel CMA-ES emitters
  - More emitters explore different regions of the search space simultaneously
  - Recommended range: 3-10

- **`batch_size_per_emitter`** (default: `20`)
  - Number of solutions generated by each emitter per generation
  - Total evaluations per generation = `num_emitters × batch_size_per_emitter`
  - Recommended range: 10-50

- **`sigma0`** (default: `0.5`)
  - Initial step size for CMA-ES
  - Controls the initial exploration radius
  - Larger values = more exploration, smaller values = more exploitation
  - Recommended range: 0.1-1.0

## Example Configuration

```json
{
  "optimize": {
    "archive_bins_per_dim": 10,
    "num_emitters": 5,
    "batch_size_per_emitter": 20,
    "sigma0": 0.5,
    "bounds": {
      ...
    }
  }
}
```

## Performance Considerations

- **Memory Usage**: Archive size grows exponentially with `archive_bins_per_dim` and number of features
- **Computation Time**: Total evaluations per generation = `num_emitters × batch_size_per_emitter`
- **Archive Coverage**: Higher `archive_bins_per_dim` may result in lower coverage but more precise diversity

## Tuning Tips

1. **Start with defaults** for initial experiments
2. **Increase `archive_bins_per_dim`** if you want more diverse solutions
3. **Increase `num_emitters`** for better parallel exploration
4. **Adjust `batch_size_per_emitter`** based on available CPU cores
5. **Tune `sigma0`** if the optimizer converges too quickly (decrease) or too slowly (increase)
